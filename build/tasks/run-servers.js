// Generated by LiveScript 1.3.1
var fs, path, async, foreverMonitor;
fs = require('fs');
path = require('path');
async = require('async');
foreverMonitor = require('forever-monitor');
module.exports = function(options, task, cb){
  var startMonitor;
  startMonitor = function(filePath, cb){
    var absolutePath;
    absolutePath = path.resolve(filePath);
    return fs.exists(absolutePath, function(exists){
      var monitor;
      if (!exists) {
        console.log("| run-servers:skipping `" + absolutePath + "`.");
        return cb();
      }
      monitor = new foreverMonitor.Monitor(absolutePath, {
        command: "node"
      });
      monitor.on("exit", function(){
        return console.log("exited");
      });
      monitor.start();
      cb();
    });
  };
  async.map(task.paths, startMonitor, cb);
};